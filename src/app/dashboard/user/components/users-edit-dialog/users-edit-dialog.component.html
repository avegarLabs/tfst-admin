<h2>{{user? 'Edit user': 'Add user'}}</h2>
<hr>
<mat-dialog-content class="mat-typography"> 
  <form [formGroup]="userForm">
    <div class="row">
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>First name</mat-label>
            <input matInput formControlName="firstName">
            <mat-hint style="color:red;" *ngIf="userForm.get('firstName')?.errors?.['required'] && userForm.get('firstName')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div class="col-md-6"> 
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Last name</mat-label>
            <input matInput formControlName="lastName">
            <mat-hint style="color:red;" *ngIf="userForm.get('lastName')?.errors?.['required'] && userForm.get('lastName')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field> 
        </p>
      </div>
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input type="email" matInput formControlName="email">
            <mat-hint style="color:red;" *ngIf="userForm.get('email')?.errors?.['required'] && userForm.get('email')?.touched">
              This field is required
            </mat-hint>
            <mat-hint style="color:red;" *ngIf="userForm.get('email')?.errors?.['email'] && userForm.get('email')?.touched">
              This is not a valid email
            </mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Phone</mat-label>
            <input matInput formControlName="phone">
            <mat-hint style="color:red;" *ngIf="userForm.get('phone')?.errors?.['required'] && userForm.get('phone')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field> 
        </p>
      </div>
    </div>
    <hr>
    <div class="roles">
      <h4>Select user roles:</h4>
      <mat-checkbox class="example-margin" formControlName="user">User</mat-checkbox>
      <mat-checkbox class="example-margin" formControlName="admin">Admin</mat-checkbox>
      <mat-checkbox class="example-margin" formControlName="customer">Customer & Services</mat-checkbox>
    </div>
    <hr>
    <div class="row">
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Adress</mat-label>
            <input matInput formControlName="address">
            <mat-hint style="color:red;" *ngIf="userForm.get('address')?.errors?.['required'] && userForm.get('address')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>PostalCode</mat-label>
            <input matInput formControlName="postal">
            <mat-hint style="color:red;" *ngIf="userForm.get('postal')?.errors?.['required'] && userForm.get('postal')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field>
        </p>
      </div>
      <div class="col-md-6">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Country</mat-label>
           <mat-select formControlName="country">
             <mat-option *ngFor="let country of countries" value={{country.id}}>{{country.commonName}}</mat-option>
           </mat-select>
           <mat-hint style="color:red;" *ngIf="userForm.get('country')?.errors?.['required'] && userForm.get('country')?.touched">
            This field is required
          </mat-hint>
         </mat-form-field>
     </div> 
      <div class="col-md-6">
        <p>
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>City</mat-label>
            <input matInput formControlName="city">
            <mat-hint style="color:red;" *ngIf="userForm.get('city')?.errors?.['required'] && userForm.get('city')?.touched">
              This field is required
            </mat-hint>
          </mat-form-field>
        </p>
      </div>
       
    </div>
  </form>
</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button [disabled]="userForm.invalid" (click)="user? update() : addUser()">{{user? 'Update': 'Save'}}</button>
  <button mat-button mat-dialog-close>Close</button>
</mat-dialog-actions>
